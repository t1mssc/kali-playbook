---
- name: Check if VS Code is already installed
  command: code --version
  register: vscode_installed
  ignore_errors: yes

- name: Install VS Code
  ansible.builtin.include_role:
    name: gantsign.visual-studio-code
  vars:
    users: 
      - username: "{{ ansible_user_id }}"
        visual_studio_code_extensions:
          - ms-python.python
          - github.copilot
          - streetsidesoftware.code-spell-checker
          - snyk-security.snyk-vulnerability-scanner
  when: vscode_installed.rc != 0